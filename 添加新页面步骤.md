# 如何添加新页面

本文档详细说明如何在这个基于 PySide6 的企业级桌面应用中添加新页面。

## 项目结构

```
app/
├── router.py          # 主路由文件，包含侧边栏和页面切换逻辑
└── views/             # 页面视图目录
    ├── home.py        # 首页
    ├── about.py       # 关于页面
    ├── iconfont.py    # 图标库页面
    └── settings.py    # 设置页面（示例）
```

## 添加新页面的完整步骤

### 步骤 1: 创建页面视图文件

在 `app/views/` 目录下创建新的 Python 文件，例如 `your_page.py`：

```python
from PySide6.QtWidgets import QWidget, QVBoxLayout, QLabel, QPushButton
from PySide6.QtCore import Qt

class YourPageView(QWidget):
    def __init__(self):
        super().__init__()
        layout = QVBoxLayout(self)
        layout.setContentsMargins(48, 48, 48, 48)
        layout.setSpacing(24)
        
        # 标题
        title = QLabel("你的页面标题")
        title.setStyleSheet("font-size: 28px; color: #2628f3; font-weight: bold; margin: 32px 0; border: none;")
        title.setAlignment(Qt.AlignCenter)
        layout.addWidget(title)
        
        # 页面内容
        content = QLabel("这里是你的页面内容")
        content.setStyleSheet("font-size: 16px; color: #666; line-height: 1.6;")
        content.setAlignment(Qt.AlignCenter)
        content.setWordWrap(True)
        layout.addWidget(content)
        
        layout.addStretch()
```

### 步骤 2: 在路由文件中导入新页面

在 `app/router.py` 文件顶部添加导入语句：

```python
from app.views.home import HomeView
from app.views.about import AboutView
from app.views.iconfont import IconFontView
from app.views.your_page import YourPageView  # 添加这行
```

### 步骤 3: 添加侧边栏按钮

在 `MainWindow.__init__()` 方法中找到菜单按钮创建部分，添加新按钮：

```python
# 菜单按钮（使用自定义按钮类）
self.btn_home = SidebarButton()
self.btn_about = SidebarButton()
self.btn_iconfont = SidebarButton()
self.btn_your_page = SidebarButton()  # 添加新按钮

self.btn_home.setFont(remix_font)
self.btn_about.setFont(remix_font)
self.btn_iconfont.setFont(remix_font)
self.btn_your_page.setFont(remix_font)  # 设置字体

self.btn_home.setText("\uea41  首页")
self.btn_about.setText("\uebba  关于")
self.btn_iconfont.setText("\uea43  图标库")
self.btn_your_page.setText("\uea43  你的页面")  # 设置文本
```

### 步骤 4: 设置按钮样式和添加到布局

找到按钮布局部分，添加新按钮：

```python
for btn in (self.btn_home, self.btn_about, self.btn_iconfont, self.btn_your_page):
    btn.setFixedHeight(40)
    sidebar_layout.addWidget(btn)

self.btn_home.clicked.connect(lambda: self.route("home"))
self.btn_about.clicked.connect(lambda: self.route("about"))
self.btn_iconfont.clicked.connect(lambda: self.route("iconfont"))
self.btn_your_page.clicked.connect(lambda: self.route("your_page"))  # 添加点击事件
```

### 步骤 5: 添加页面到视图字典

找到 `self.views` 字典，添加新页面：

```python
self.views = {
    "home": HomeView(),
    "about": AboutView(),
    "iconfont": IconFontView(),
    "your_page": YourPageView(),  # 添加新页面
}
```

### 步骤 6: 更新按钮样式方法

在 `update_button_styles()` 方法中添加新按钮的状态处理：

```python
def update_button_styles(self):
    """更新按钮样式，根据选中状态设置不同的样式"""
    # 设置选中状态
    self.btn_home.is_selected = (self.current_route == "home")
    self.btn_about.is_selected = (self.current_route == "about")
    self.btn_iconfont.is_selected = (self.current_route == "iconfont")
    self.btn_your_page.is_selected = (self.current_route == "your_page")  # 添加这行
    
    # 更新样式
    self.btn_home.update_style()
    self.btn_about.update_style()
    self.btn_iconfont.update_style()
    self.btn_your_page.update_style()  # 添加这行
```

### 步骤 7: 更新侧边栏动画中的文字处理

在 `toggle_sidebar()` 方法中找到文字动画部分，添加新按钮的文字处理：

```python
# 展开时显示文字
def show_text():
    self.btn_home.setText("\uea41  首页")
    self.btn_about.setText("\uebba  关于")
    self.btn_iconfont.setText("\uea43  图标库")
    self.btn_your_page.setText("\uea43  你的页面")  # 添加这行
    self.toggle_btn.setText("\uf4f6")

# 收起时隐藏文字
def hide_text():
    self.btn_home.setText("\uea41")
    self.btn_about.setText("\uebba")
    self.btn_iconfont.setText("\uea43")
    self.btn_your_page.setText("\uea43")  # 添加这行
    self.toggle_btn.setText("\uf4f8")
```

## 图标使用说明

应用使用 RemixIcon 字体图标，常用图标代码：

- `\uea41` - 首页图标
- `\uebba` - 关于图标  
- `\uea43` - 应用图标
- `\uf4f6` - 菜单折叠图标
- `\uf4f8` - 菜单展开图标

你可以在 [RemixIcon 官网](https://remixicon.com/) 查找更多图标。

## 样式规范

### 页面布局
- 使用 `QVBoxLayout` 作为主布局
- 设置 `setContentsMargins(48, 48, 48, 48)` 保持统一边距
- 使用 `setSpacing(24)` 设置组件间距

### 颜色规范
- 主色调：`#2628f3`（蓝色）
- 文字颜色：`#333`（深灰）、`#666`（中灰）
- 背景色：`#f5f7fa`（浅灰）

### 字体规范
- 标题：`font-size: 28px; font-weight: bold;`
- 正文：`font-size: 16px;`
- 按钮：`font-size: 14px;`

## 注意事项

1. **页面类名**：建议使用 `YourPageView` 格式命名
2. **路由名称**：使用小写字母和下划线，如 `your_page`
3. **按钮文本**：图标 + 空格 + 中文描述
4. **样式一致性**：保持与现有页面相同的样式风格
5. **功能实现**：在页面类中实现具体的业务逻辑

## 测试验证

添加新页面后，请验证：

1. ✅ 侧边栏显示新按钮
2. ✅ 点击按钮能正确切换到新页面
3. ✅ 按钮选中状态正确显示
4. ✅ 侧边栏展开/收起动画正常
5. ✅ 页面内容正确显示

## 示例：设置页面

参考 `app/views/settings.py` 文件，这是一个完整的设置页面实现示例，包含了：

- 页面布局结构
- 样式设置
- 交互组件
- 功能实现

按照以上步骤，你就可以成功添加新页面到应用中了！ 